# Poly Trader - Live Trading Analysis & Strategy Documentation

> **Created:** December 26, 2025  
> **Updated:** December 26, 2025 - LIVE TRADING NOW IMPLEMENTED âœ…  
> **Purpose:** Complete breakdown of how trading works, cash/equity behavior, and execution flow

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [How to Enable Live Trading](#how-to-enable-live-trading)
3. [Current Trading Mode Status](#current-trading-mode-status)
4. [Cash & Equity: What Changes and When](#cash--equity-what-changes-and-when)
5. [Trade Execution Flow - Step by Step](#trade-execution-flow---step-by-step)
6. [Complete Trading Strategy Breakdown](#complete-trading-strategy-breakdown)
7. [Commands Reference](#commands-reference)

---

## Executive Summary

### âœ… LIVE TRADING IS NOW FULLY IMPLEMENTED

| Question | Answer |
|----------|--------|
| **Will live trading change cash/equity?** | **YES** - In LIVE mode, cash/equity are fetched from your real Polymarket balance. |
| **Does the platform use real trading?** | **YES** - When in LIVE mode, orders are sent to Polymarket's CLOB API. |
| **Are trades executed on Polymarket?** | **YES** - Orders are cryptographically signed and posted to Polymarket. |

---

## How to Enable Live Trading

### Step 1: Install Python Dependencies

```bash
pip install -r scripts/requirements.txt
# or
pip install py-clob-client
```

### Step 2: Get Your Private Key

Your private key is from your Polymarket wallet (MetaMask/WalletConnect).
- Export it from your wallet settings
- It's a 64-character hex string

### Step 3: Set Environment Variables

Add to your `.env` file:

```bash
POLYMARKET_PRIVATE_KEY="your_64_character_hex_private_key"
```

### Step 4: (Optional) Derive API Credentials

```bash
python3 scripts/order_executor.py derive-key
```

Save the output to your `.env`:

```bash
POLYMARKET_API_KEY="..."
POLYMARKET_SECRET="..."
POLYMARKET_PASSPHRASE="..."
```

### Step 5: Switch to Live Mode

In the terminal or dashboard, run:

```
mode live
```

âš ï¸ **WARNING:** Live mode uses REAL MONEY. Start with small amounts!

---

## Current Trading Mode Status

### The Bot is 100% PAPER TRADING

Looking at the actual code:

#### 1. Trading Engine (`src/engine/trading_engine.cpp`)

```cpp
std::optional<Trade> TradingEngine::execute_trade(...) {
    // TODO: Implement actual API call to Polymarket
    // For now, simulate the trade
    
    Trade trade{...};
    
    // Update cash balance (IN MEMORY ONLY)
    cash_ -= trade.cost;
    
    // If this is leg 2 (hedge), update realized PnL
    if (trade.leg == 2 && current_position_) {
        double profit = (1.0 - current_position_->avg_cost - trade.price) * shares;
        realized_pnl_ += profit;
        cash_ += shares; // Settlement of binary option
    }
    
    return trade;
}
```

**Key Points:**
- The TODO clearly states this is a placeholder
- No HTTP request is made to Polymarket's CLOB API
- Cash/equity are updated in local C++ variables only

#### 2. API Server (`src/api/api_server.cpp`)

```cpp
std::string get_status_json() {
    nlohmann::json status = {
        {"data", {
            {"bot", {
                {"mode", "PAPER"},  // â† HARDCODED as PAPER
            }},
            {"portfolio", {
                {"cash", 1000.0},   // â† HARDCODED value!
                {"equity", 1000.0}  // â† HARDCODED value!
            }},
        }}
    };
    return status.dump();
}
```

**Problem:** The API server returns HARDCODED values (`cash: 1000.0`) instead of reading from the trading engine's actual `cash_` variable.

#### 3. Polymarket Client (`src/network/polymarket_client.cpp`)

```cpp
// The place_order function is DECLARED but NOT IMPLEMENTED
OrderResult place_order(
    const std::string& token_id,
    const std::string& side,
    double size,
    double price
);
// â†‘ No implementation exists!
```

---

## Cash & Equity: What Changes and When

### Current Behavior (Paper Trading)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CASH & EQUITY FLOW (PAPER)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         TRADING ENGINE                                â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   double cash_ = 1000.0;        â† Starting balance (in-memory)       â”‚   â”‚
â”‚  â”‚   double realized_pnl_ = 0.0;   â† Profit/loss tracking               â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   On execute_trade():                                                 â”‚   â”‚
â”‚  â”‚     cash_ -= trade.cost;         â† Deduct cost from memory           â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   On hedge completion (leg 2):                                        â”‚   â”‚
â”‚  â”‚     realized_pnl_ += profit;     â† Add profit to memory              â”‚   â”‚
â”‚  â”‚     cash_ += shares;             â† Simulate $1 payout per share      â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â”‚ get_status() - ATTEMPTS to read values           â”‚
â”‚                           â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         API SERVER                                    â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   BUG: Returns HARDCODED values instead of engine's actual state:    â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   {"cash": 1000.0, "equity": 1000.0}  â† Always returns this!         â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         DASHBOARD                                     â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚   Shows: Cash $1,000.00  Equity $1,000.00                            â”‚   â”‚
â”‚  â”‚          â†‘ These NEVER change because API returns hardcoded values    â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Summary: What DOES and DOESN'T Change

| Data Point | Where It's Stored | Does It Update? | Visible in Dashboard? |
|------------|-------------------|-----------------|----------------------|
| `cash_` | Trading Engine (C++ memory) | âœ… Yes, on each trade | âŒ No (API returns hardcoded 1000) |
| `realized_pnl_` | Trading Engine (C++ memory) | âœ… Yes, on hedge complete | âŒ No (API returns hardcoded 0) |
| `equity` | Calculated from cash + positions | âœ… Yes, in engine | âŒ No (API returns hardcoded 1000) |
| `positions` | Trading Engine (C++ memory) | âœ… Yes, on trades | âŒ No (API returns empty) |
| `trade_history_` | Trading Engine (C++ vector) | âœ… Yes, stored in memory | âš ï¸ Partial (API returns empty array) |

### The Real Issue

**The trading engine DOES track cash/equity internally, but the API server has a bug where it returns hardcoded values instead of calling `engine.get_status()` properly for portfolio data.**

---

## Trade Execution Flow - Step by Step

### Complete Execution Path

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPLETE TRADE EXECUTION FLOW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  STEP 1: MARKET DATA RECEIVED                                               â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Polymarket WebSocket â†’ Price Update                                â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  wss://ws-subscriptions-clob.polymarket.com                         â”‚    â”‚
â”‚  â”‚    â””â”€â–º { token_id: "...", price: 0.34 }                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  STEP 2: PRICE CALLBACK TRIGGERED                                           â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  void on_price_update(const PriceUpdate& update) {                  â”‚    â”‚
â”‚  â”‚      if (update.token_id == g_up_token) {                          â”‚    â”‚
â”‚  â”‚          s_up_price = price;                                        â”‚    â”‚
â”‚  â”‚      } else if (update.token_id == g_down_token) {                 â”‚    â”‚
â”‚  â”‚          s_down_price = price;                                      â”‚    â”‚
â”‚  â”‚      }                                                              â”‚    â”‚
â”‚  â”‚      set_live_prices(s_up_price, s_down_price);                    â”‚    â”‚
â”‚  â”‚  }                                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  STEP 3: ENGINE PROCESSES ORDERBOOK UPDATE                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  void TradingEngine::on_orderbook_update(...) {                     â”‚    â”‚
â”‚  â”‚      // Update internal orderbook state                             â”‚    â”‚
â”‚  â”‚      market.up_orderbook = snapshot;                                â”‚    â”‚
â”‚  â”‚      // Trigger trade logic                                         â”‚    â”‚
â”‚  â”‚      process_market(market_slug);                                   â”‚    â”‚
â”‚  â”‚  }                                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  STEP 4: CHECK ENTRY CONDITIONS                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  bool TradingEngine::should_enter(market, side_out, price_out) {    â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚      double up_ask = get_best_ask(market.up_orderbook);            â”‚    â”‚
â”‚  â”‚      double down_ask = get_best_ask(market.down_orderbook);        â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚      // Check if either side < entry threshold (0.36)               â”‚    â”‚
â”‚  â”‚      if (up_ask < config_.move) {           // 0.36                â”‚    â”‚
â”‚  â”‚          side_out = "UP";                                           â”‚    â”‚
â”‚  â”‚          price_out = up_ask;                                        â”‚    â”‚
â”‚  â”‚          return true;  â† ENTRY SIGNAL!                              â”‚    â”‚
â”‚  â”‚      }                                                              â”‚    â”‚
â”‚  â”‚      // Same for DOWN...                                            â”‚    â”‚
â”‚  â”‚  }                                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  STEP 5: EXECUTE LEG 1 TRADE                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  auto trade = execute_trade(market_slug, side, token_id,           â”‚    â”‚
â”‚  â”‚                             config_.shares, price);                 â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  INSIDE execute_trade():                                            â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚    â”‚
â”‚  â”‚  Trade trade {                                                      â”‚    â”‚
â”‚  â”‚      .id = "trade_" + timestamp,                                   â”‚    â”‚
â”‚  â”‚      .market_slug = market_slug,                                   â”‚    â”‚
â”‚  â”‚      .leg = 1,                                                     â”‚    â”‚
â”‚  â”‚      .side = "UP",                                                 â”‚    â”‚
â”‚  â”‚      .shares = 10,                                                 â”‚    â”‚
â”‚  â”‚      .price = 0.34,                                                â”‚    â”‚
â”‚  â”‚      .cost = 3.40,        // 10 Ã— $0.34                           â”‚    â”‚
â”‚  â”‚  };                                                                 â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  cash_ -= trade.cost;     // $1000 â†’ $996.60                       â”‚    â”‚
â”‚  â”‚  trade_history_.push_back(trade);                                  â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  âš ï¸ NO API CALL TO POLYMARKET - Trade is SIMULATED                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  STEP 6: CREATE POSITION                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  current_position_ = Position {                                     â”‚    â”‚
â”‚  â”‚      .market_slug = "btc-updown-15m-...",                          â”‚    â”‚
â”‚  â”‚      .side = "UP",                                                  â”‚    â”‚
â”‚  â”‚      .shares = 10,                                                  â”‚    â”‚
â”‚  â”‚      .avg_cost = 0.34,                                              â”‚    â”‚
â”‚  â”‚      .total_cost = 3.40,                                            â”‚    â”‚
â”‚  â”‚  };                                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  STEP 7: MONITOR FOR HEDGE CONDITION                                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                        â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  bool TradingEngine::should_hedge(pos, market, price_out) {         â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚      // Get opposite side ask price                                 â”‚    â”‚
â”‚  â”‚      double opposite_ask = get_best_ask(market.down_orderbook);    â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚      // Check: avg_cost + opposite_ask â‰¤ sum_target                â”‚    â”‚
â”‚  â”‚      double sum = pos.avg_cost + opposite_ask;                     â”‚    â”‚
â”‚  â”‚      // Example: 0.34 + 0.64 = 0.98                                â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚      if (sum <= config_.sum_target) {  // 0.98 â‰¤ 0.99             â”‚    â”‚
â”‚  â”‚          price_out = opposite_ask;                                  â”‚    â”‚
â”‚  â”‚          return true;  â† HEDGE SIGNAL!                              â”‚    â”‚
â”‚  â”‚      }                                                              â”‚    â”‚
â”‚  â”‚  }                                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                                  â”‚
â”‚                           â–¼                                                  â”‚
â”‚  STEP 8: EXECUTE LEG 2 (HEDGE) TRADE                                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                        â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Trade trade {                                                      â”‚    â”‚
â”‚  â”‚      .leg = 2,                                                     â”‚    â”‚
â”‚  â”‚      .side = "DOWN",                                               â”‚    â”‚
â”‚  â”‚      .shares = 10,                                                 â”‚    â”‚
â”‚  â”‚      .price = 0.64,                                                â”‚    â”‚
â”‚  â”‚      .cost = 6.40,                                                 â”‚    â”‚
â”‚  â”‚  };                                                                 â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  cash_ -= trade.cost;     // $996.60 â†’ $990.20                    â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  // Calculate profit                                                â”‚    â”‚
â”‚  â”‚  profit = (1.0 - 0.34 - 0.64) Ã— 10 = $0.20                        â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  realized_pnl_ += profit;   // $0 â†’ $0.20                          â”‚    â”‚
â”‚  â”‚  cash_ += shares;           // $990.20 â†’ $1000.20 (settlement)     â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  current_position_.reset(); // Clear position                       â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  âš ï¸ AGAIN - NO REAL ORDER TO POLYMARKET                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  STEP 9: CONSOLE OUTPUT (only visible feedback)                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚                                                                              â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—               â”‚
â”‚  â•‘  ğŸ”´ LEG 2 HEDGE - CYCLE COMPLETE                          â•‘               â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£               â”‚
â”‚  â•‘  Leg 1:     UP @ $0.3400                                  â•‘               â”‚
â”‚  â•‘  Leg 2:     DOWN @ $0.6400                                â•‘               â”‚
â”‚  â•‘  Sum:       $0.9800                                       â•‘               â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£               â”‚
â”‚  â•‘  ğŸ’° PROFIT: +$0.20                                        â•‘               â”‚
â”‚  â•‘  Total P&L: $0.20                                         â•‘               â”‚
â”‚  â•‘  Cash:      $1000.20                                      â•‘               â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Complete Trading Strategy Breakdown

### The Bulletproof Hedge Strategy

This strategy exploits the **binary outcome** nature of Polymarket Up/Down markets.

### Core Principle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BINARY MARKET ARBITRAGE PRINCIPLE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  FACT: In a binary market (UP vs DOWN):                                     â”‚
â”‚        - At resolution, EXACTLY ONE side pays $1.00                         â”‚
â”‚        - The OTHER side pays $0.00                                          â”‚
â”‚                                                                              â”‚
â”‚  IMPLICATION: If you hold 1 share of BOTH sides:                            â”‚
â”‚               - You're GUARANTEED to receive $1.00                          â”‚
â”‚               - (One side wins = $1, other loses = $0, total = $1)          â”‚
â”‚                                                                              â”‚
â”‚  OPPORTUNITY: If you can buy both sides for < $1.00 total:                  â”‚
â”‚               - Guaranteed profit = $1.00 - total_cost                      â”‚
â”‚                                                                              â”‚
â”‚  Example:                                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                                                                    â”‚
â”‚  Buy 10 UP   @ $0.34 = $3.40                                                â”‚
â”‚  Buy 10 DOWN @ $0.64 = $6.40                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚  Total Cost:         $9.80                                                   â”‚
â”‚  Guaranteed Payout: $10.00  (10 shares Ã— $1.00)                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚  LOCKED PROFIT:      $0.20  (2.04%)                                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Strategy Phases (5 Phases)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           STRATEGY PHASES                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  PHASE 1: ENTRY DETECTION                                              â•‘  â”‚
â”‚  â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  WAIT for either UP or DOWN ask price to drop below threshold         â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Entry Condition: price < 0.36 (36Â¢)                                  â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Why 36Â¢?                                                              â•‘  â”‚
â”‚  â•‘  - At this price, opposite side is typically ~64Â¢                     â•‘  â”‚
â”‚  â•‘  - Sum = 36Â¢ + 64Â¢ = $1.00 (breakeven)                               â•‘  â”‚
â”‚  â•‘  - Any further drop on either side = profit opportunity               â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                     â”‚                                        â”‚
â”‚                                     â–¼                                        â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  PHASE 2: LEG 1 EXECUTION                                              â•‘  â”‚
â”‚  â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                              â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  BUY the cheap side (whichever dropped below threshold)               â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Parameters:                                                           â•‘  â”‚
â”‚  â•‘  - shares: 10 (configurable)                                          â•‘  â”‚
â”‚  â•‘  - Execute at current ask price                                       â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Example:                                                              â•‘  â”‚
â”‚  â•‘  UP drops to $0.32 â†’ BUY 10 UP @ $0.32 = $3.20 cost                  â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                     â”‚                                        â”‚
â”‚                                     â–¼                                        â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  PHASE 3: DCA (Dollar-Cost Averaging) - Optional                       â•‘  â”‚
â”‚  â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                       â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  If price continues dropping, buy MORE at lower prices                â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  DCA Levels: [0.30, 0.25, 0.20, 0.15]                                 â•‘  â”‚
â”‚  â•‘  DCA Multiplier: 1.5Ã— shares at each level                            â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Example DCA Execution:                                                â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â•‘  â”‚
â”‚  â•‘  â”‚ Price Level â”‚ Shares     â”‚ Running Total â”‚ Avg Cost       â”‚        â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â•‘  â”‚
â”‚  â•‘  â”‚ $0.35       â”‚ 10         â”‚ 10            â”‚ $0.350         â”‚        â•‘  â”‚
â”‚  â•‘  â”‚ $0.30       â”‚ 15 (Ã—1.5)  â”‚ 25            â”‚ $0.320         â”‚        â•‘  â”‚
â”‚  â•‘  â”‚ $0.25       â”‚ 22 (Ã—1.5)  â”‚ 47            â”‚ $0.287         â”‚        â•‘  â”‚
â”‚  â•‘  â”‚ $0.20       â”‚ 33 (Ã—1.5)  â”‚ 80            â”‚ $0.255         â”‚        â•‘  â”‚
â”‚  â•‘  â”‚ $0.15       â”‚ 50 (Ã—1.5)  â”‚ 130           â”‚ $0.221         â”‚        â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  PURPOSE: Lower average cost = easier to hedge profitably             â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                     â”‚                                        â”‚
â”‚                                     â–¼                                        â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  PHASE 4: HEDGE DETECTION                                              â•‘  â”‚
â”‚  â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                              â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Continuously monitor for profitable hedge opportunity                 â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Hedge Condition:                                                      â•‘  â”‚
â”‚  â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â•‘  â”‚
â”‚  â•‘  avg_cost (Leg 1) + opposite_ask (Leg 2) â‰¤ sum_target (0.99)         â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Example:                                                              â•‘  â”‚
â”‚  â•‘  - Holding: 50 UP shares @ avg $0.28                                  â•‘  â”‚
â”‚  â•‘  - DOWN ask: $0.70                                                    â•‘  â”‚
â”‚  â•‘  - Sum: $0.28 + $0.70 = $0.98 â‰¤ $0.99 âœ… HEDGE SIGNAL!               â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                     â”‚                                        â”‚
â”‚                                     â–¼                                        â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  PHASE 5: LEG 2 EXECUTION (HEDGE)                                      â•‘  â”‚
â”‚  â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                      â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  BUY the opposite side with SAME number of shares                     â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Example:                                                              â•‘  â”‚
â”‚  â•‘  - Already holding: 50 UP @ avg $0.28                                 â•‘  â”‚
â”‚  â•‘  - Execute: BUY 50 DOWN @ $0.70                                       â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  Result:                                                               â•‘  â”‚
â”‚  â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â•‘  â”‚
â”‚  â•‘  Leg 1 Cost: 50 Ã— $0.28 = $14.00                                      â•‘  â”‚
â”‚  â•‘  Leg 2 Cost: 50 Ã— $0.70 = $35.00                                      â•‘  â”‚
â”‚  â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â•‘  â”‚
â”‚  â•‘  Total Cost:              $49.00                                       â•‘  â”‚
â”‚  â•‘  Guaranteed Payout:       $50.00  (50 Ã— $1.00)                        â•‘  â”‚
â”‚  â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â•‘  â”‚
â”‚  â•‘  LOCKED PROFIT:            $1.00  (2.04%)                             â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•‘  ğŸ¯ CYCLE COMPLETE - Profit is GUARANTEED regardless of outcome       â•‘  â”‚
â”‚  â•‘                                                                        â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Configuration Parameters

| Parameter | Default Value | Description |
|-----------|---------------|-------------|
| `entry_threshold` | 0.36 | Buy when price drops below 36Â¢ |
| `shares` | 10 | Number of shares per trade |
| `sum_target` | 0.99 | Max combined cost for hedge (guarantees â‰¥1% profit) |
| `dca_enabled` | true | Enable dollar-cost averaging |
| `dca_levels` | [0.30, 0.25, 0.20, 0.15] | Price levels to buy more |
| `dca_multiplier` | 1.5 | Increase shares by 1.5Ã— at each DCA level |
| `breakeven_enabled` | true | Exit at breakeven if no hedge opportunity |

### Profit Formula

```
Locked Profit = (shares Ã— $1.00) - (leg1_cost + leg2_cost)
Locked Profit % = (1.00 - sum) Ã— 100%

Example:
sum = 0.28 + 0.70 = 0.98
Locked Profit % = (1.00 - 0.98) Ã— 100% = 2%
```

### Fallback: Breakeven Exit

If the hedge condition is NEVER met (opposite side stays too expensive):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BREAKEVEN EXIT STRATEGY                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Condition: No profitable hedge available, but Leg 1 price recovers         â”‚
â”‚                                                                              â”‚
â”‚  Check: current_bid â‰¥ avg_cost                                              â”‚
â”‚                                                                              â”‚
â”‚  Example:                                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                                                                    â”‚
â”‚  - Bought 50 UP @ $0.28 avg                                                 â”‚
â”‚  - DOWN stays at $0.80 (no hedge: 0.28 + 0.80 = 1.08 > 0.99)               â”‚
â”‚  - UP recovers to $0.30 (bid)                                               â”‚
â”‚  - SELL 50 UP @ $0.30 = $15.00                                             â”‚
â”‚  - Cost was $14.00                                                          â”‚
â”‚  - Small profit: $1.00                                                      â”‚
â”‚                                                                              â”‚
â”‚  This prevents holding positions that can never be hedged profitably.       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## What Needs to Change for Live Trading

### Required Changes for Real Money Trading

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUIREMENTS FOR LIVE TRADING                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  1. POLYMARKET API AUTHENTICATION                                           â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                            â”‚
â”‚                                                                              â”‚
â”‚  You need:                                                                   â”‚
â”‚  - API Key from Polymarket                                                  â”‚
â”‚  - API Secret                                                               â”‚
â”‚  - API Passphrase                                                           â”‚
â”‚  - Wallet with USDC on Polygon                                              â”‚
â”‚                                                                              â”‚
â”‚  2. IMPLEMENT place_order() IN polymarket_client.cpp                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                        â”‚
â”‚                                                                              â”‚
â”‚  Currently missing implementation:                                           â”‚
â”‚                                                                              â”‚
â”‚  OrderResult PolymarketClient::place_order(                                 â”‚
â”‚      const std::string& token_id,                                          â”‚
â”‚      const std::string& side,                                              â”‚
â”‚      double size,                                                          â”‚
â”‚      double price                                                          â”‚
â”‚  ) {                                                                         â”‚
â”‚      // TODO: Implement signed API request to Polymarket CLOB               â”‚
â”‚      // Endpoint: POST https://clob.polymarket.com/orders                   â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  3. MODIFY execute_trade() TO CALL REAL API                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚                                                                              â”‚
â”‚  In trading_engine.cpp:                                                     â”‚
â”‚                                                                              â”‚
â”‚  std::optional<Trade> TradingEngine::execute_trade(...) {                   â”‚
â”‚      // Instead of simulation:                                               â”‚
â”‚      // auto result = polymarket_client->place_order(...);                  â”‚
â”‚      // Verify fill, update cash from actual balance                        â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  4. FIX API SERVER TO RETURN REAL VALUES                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚
â”‚                                                                              â”‚
â”‚  In api_server.cpp, replace hardcoded values:                               â”‚
â”‚                                                                              â”‚
â”‚  // CURRENT (broken):                                                        â”‚
â”‚  {"cash", 1000.0}                                                           â”‚
â”‚                                                                              â”‚
â”‚  // SHOULD BE:                                                               â”‚
â”‚  {"cash", engine_.get_status().cash}                                        â”‚
â”‚                                                                              â”‚
â”‚  5. ADD REAL BALANCE FETCHING                                               â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                â”‚
â”‚                                                                              â”‚
â”‚  Query Polymarket for actual USDC balance:                                  â”‚
â”‚  GET https://clob.polymarket.com/balance                                    â”‚
â”‚                                                                              â”‚
â”‚  6. ADD ORDER STATUS TRACKING                                               â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                â”‚
â”‚                                                                              â”‚
â”‚  - Track pending orders                                                      â”‚
â”‚  - Handle partial fills                                                      â”‚
â”‚  - Handle order rejections                                                   â”‚
â”‚  - Handle slippage                                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

| Aspect | Current State | Live Trading Requirement |
|--------|---------------|--------------------------|
| **Order Execution** | Simulated locally | API calls to Polymarket CLOB |
| **Cash Balance** | In-memory tracking, hardcoded in API | Fetched from Polymarket balance API |
| **Equity** | Calculated but not exposed | Real positions + real cash |
| **Trade History** | Stored in memory | Should persist to database |
| **API Authentication** | Not implemented | Need API key, secret, passphrase |
| **Wallet** | Not required | Need funded Polygon wallet with USDC |

---

---

## Commands Reference

### Trading Mode Commands

| Command | Description |
|---------|-------------|
| `mode paper` | Switch to paper trading (simulated) |
| `mode live` | Switch to live trading (real money) |
| `status` | Show current bot status including mode |
| `balance` | Show current cash balance |
| `reset` | Reset paper trading state to $1000 |

### Bot Control Commands

| Command | Description |
|---------|-------------|
| `auto on` | Enable automatic trading |
| `auto off` | Disable automatic trading |
| `config` | Show current configuration |
| `help` | Show all available commands |

### Python Executor Commands

```bash
# Place a limit order
python3 scripts/order_executor.py place --token TOKEN_ID --side BUY --size 10 --price 0.35

# Place a market order (FOK)
python3 scripts/order_executor.py market --token TOKEN_ID --side BUY --size 10

# Get balance
python3 scripts/order_executor.py balance

# Get positions
python3 scripts/order_executor.py positions

# Cancel an order
python3 scripts/order_executor.py cancel --order-id ORDER_ID

# Cancel all orders
python3 scripts/order_executor.py cancel-all

# Derive API key from private key
python3 scripts/order_executor.py derive-key
```

---

## Summary

| Feature | Status |
|---------|--------|
| Paper Trading | âœ… Fully Working |
| Live Trading | âœ… Fully Implemented |
| Real-time Prices | âœ… Via WebSocket |
| Order Signing (EIP-712) | âœ… Via Python SDK |
| Balance Fetching | âœ… From Polymarket |
| Mode Toggle | âœ… paper/live commands |
| Dashboard Integration | âœ… Real values displayed |

**The bot now supports both PAPER and LIVE trading modes. Use `mode live` to trade with real money!**

